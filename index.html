<!DOCTYPE html>  <html lang="en">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>Discussion Forum</title>  
<style>  
  body { margin:0; font-family: Arial, sans-serif; background:#f5f7fa; }  /* Login/Signup Overlay */
#login-overlay {
position: fixed; top:0; left:0; width:100%; height:100%;
background: rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center;
z-index: 9999;
}
#login-box {
background:white; padding:30px; border-radius:12px; width:300px; text-align:center;
}
#login-box input { width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #ccc; }
#login-box button { width:100%; padding:10px; border-radius:8px; border:none; background-color:#1e3a8a; color:white; cursor:pointer; }
#login-box button:hover { background-color:#334155; }
#toggle-login { color:#1e3a8a; cursor:pointer; margin-top:10px; display:block; }

/* Forum Styles */
header {
background-color:#1e3a8a; color:white; padding:15px; font-size:20px;
text-align:center; position:fixed; top:0; width:100%; z-index:100;
}
#logout-btn {
float:right; background:#f87171; color:white; border:none;
border-radius:8px; padding:5px 10px; cursor:pointer;
}
#logout-btn:hover { background:#dc2626; }

/* Messages container with background and frosted-glass overlay */
.messages {
margin-top:60px;
margin-bottom:120px;
padding:10px;
display:flex;
flex-direction:column;
overflow-y:auto;
height:calc(100vh - 140px);
position: relative;

/* Working hosted image (Imgur placeholder) */  
background-image: url('https://i.imgur.com/5qfE36Z.jpg');   
background-size: cover;  
background-position: center;  
background-repeat: no-repeat;

}
.messages::before {
content: '';
position: absolute;
top:0; left:0; width:100%; height:100%;
backdrop-filter: blur(8px);
background: rgba(255,255,255,0.2);
z-index:0;
}

.message {
background: rgba(255,255,255,0.8);
padding:10px 15px; border-radius:12px; margin:5px 0;
max-width:70%; word-wrap:break-word;
box-shadow:0 1px 3px rgba(0,0,0,0.1);
position:relative; z-index:1;
}
.message.user { align-self:flex-end; background-color: var(--user-color, #cce4ff); }
.message.other { align-self:flex-start; background-color: var(--user-color, #e2e8f0); }
.sender { font-weight:bold; cursor:pointer; margin-bottom:4px; }
.time { font-size:10px; color:#555; margin-top:4px; }
.replies { margin-left:20px; margin-top:5px; }
.reply { background:#f1f5f9; margin-top:5px; padding:5px 10px; border-radius:10px; font-size:14px; position:relative; }
.reply .sender { font-weight:bold; cursor:pointer; display:inline-block; }
.reply-btn { font-size:12px; color:#1e3a8a; background:none; border:none; cursor:pointer; margin-left:10px; }

.new-post { position:fixed; bottom:0; width:100%; background:#fff; display:flex; flex-direction:column; padding:10px; box-shadow:0 -2px 5px rgba(0,0,0,0.2); }
.new-post input { flex:1; padding:10px; border-radius:20px; border:1px solid #ccc; outline:none; font-family: monospace; caret-color:#1e3a8a; }
.new-post button { margin-top:5px; background-color:#1e3a8a; color:white; border:none; border-radius:20px; padding:10px 15px; cursor:pointer; align-self:flex-end; }
.new-post button:hover { background-color:#334155; }

/* Blinking cursor effect */
.new-post input.blink::after {
content: '|';
animation: blink 1s step-end infinite;
}
@keyframes blink {
0%, 50%, 100% { opacity: 1; }
25%, 75% { opacity: 0; }
}

/* WhatsApp Floating Icon with Pulse */
#whatsapp-icon {
position: fixed; top: 80px; right: 20px; width: 60px; height: 60px; z-index: 10000; cursor: pointer;
border-radius: 50%; box-shadow: 0 2px 10px rgba(0,0,0,0.3); animation: pulse 2s infinite;
}
#whatsapp-icon:hover { transform: scale(1.1); }
#whatsapp-icon img { width:100%; height:100%; border-radius:50%; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
</style>

</head>  
<body>  <!-- Login Overlay -->  <div id="login-overlay">  
  <div id="login-box">  
    <h2 id="login-title">Login</h2>  
    <input type="text" id="login-name" placeholder="Name (Sign Up Only)">  
    <input type="email" id="login-email" placeholder="Email">  
    <input type="password" id="login-password" placeholder="Password">  
    <button id="login-btn">Login</button>  
    <span id="toggle-login">Don't have an account? Sign Up</span>  
  </div>  
</div>  <header>  
  Discussion Forum  
  <button id="logout-btn">Logout</button>  
</header>  <div class="messages" id="messages"></div>  <div class="new-post">  
  <input type="text" id="message-input" class="blink" placeholder="Write a new post...">  
  <button onclick="sendMessage()">Send</button>  
</div>  <!-- WhatsApp Floating Icon -->  <a href="https://wa.me/260768037965" target="_blank" id="whatsapp-icon" title="Chat on WhatsApp">  
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />  
</a>  <script>  
let currentUser = null;  
let currentUserJoinTime = null;  
let isLogin = true;  
  
const overlay = document.getElementById('login-overlay');  
const toggleLogin = document.getElementById('toggle-login');  
const loginBtn = document.getElementById('login-btn');  
const loginNameInput = document.getElementById('login-name');  
  
toggleLogin.addEventListener('click', () => {  
  isLogin = !isLogin;  
  document.getElementById('login-title').innerText = isLogin ? "Login" : "Sign Up";  
  loginBtn.innerText = isLogin ? "Login" : "Sign Up";  
  toggleLogin.innerText = isLogin ? "Don't have an account? Sign Up" : "Already have an account? Login";  
  loginNameInput.style.display = isLogin ? "none" : "block";  
});  
  
loginBtn.addEventListener('click', () => {  
  const name = loginNameInput.value.trim();  
  const email = document.getElementById('login-email').value.trim();  
  const password = document.getElementById('login-password').value.trim();  
  if(!email || !password || (!isLogin && !name)) { alert("Fill all fields!"); return; }  
  
  if(isLogin) {  
    const userData = JSON.parse(localStorage.getItem(email));  
    if(userData && userData.password === password) {  
      currentUser = userData.name;  
      currentUserJoinTime = userData.joinTime;  
      overlay.style.display = 'none';  
    } else { alert("Invalid login"); }  
  } else {  
    const joinTime = Date.now();  
    localStorage.setItem(email, JSON.stringify({name:name, password:password, joinTime:joinTime}));  
    currentUser = name;  
    currentUserJoinTime = joinTime;  
    overlay.style.display = 'none';  
  }  
});  
  
document.getElementById('logout-btn').addEventListener('click', () => {  
  currentUser = null;  
  overlay.style.display = 'flex';  
});  
  
const messagesContainer = document.getElementById('messages');  
const input = document.getElementById('message-input');  
  
let messages = [];  
const userColors = {};  
const colors = ['#cce4ff','#ffd6cc','#d6ffcc','#ffe6cc','#f1f5f9','#d6e0ff','#ffe6f0','#d6fff5'];  
  
function getUserColor(user) {  
  if(!userColors[user]) {  
    const color = colors[Math.floor(Math.random() * colors.length)];  
    userColors[user] = color;  
  }  
  return userColors[user];  
}  
  
function renderMessages() {  
  const isAtBottom = messagesContainer.scrollHeight - messagesContainer.scrollTop <= messagesContainer.clientHeight + 10;  
  messagesContainer.innerHTML = "";  
  
  messages.forEach(msg => {  
    if(!msg.timestamp || msg.timestamp < currentUserJoinTime) return;  
  
    const msgDiv = document.createElement('div');  
    msgDiv.className = 'message ' + (msg.sender === currentUser ? "user" : "other");  
    msgDiv.style.setProperty('--user-color', getUserColor(msg.sender));  
  
    const sender = document.createElement('div'); sender.className='sender'; sender.textContent = msg.sender;  
    const msgText = document.createElement('div'); msgText.textContent = msg.text;  
    const time = document.createElement('div'); time.className='time'; time.textContent = new Date(msg.timestamp).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});  
  
    const repliesContainer = document.createElement('div'); repliesContainer.className='replies';  
    msg.replies.forEach(rep => {  
      const repDiv = document.createElement('div'); repDiv.className='reply';  
      const repSender = document.createElement('span'); repSender.className='sender'; repSender.textContent = rep.sender;  
      const repText = document.createElement('span'); repText.textContent = ": " + rep.text;  
      repDiv.appendChild(repSender); repDiv.appendChild(repText);  
      repliesContainer.appendChild(repDiv);  
    });  
  
    const replyBtn = document.createElement('button'); replyBtn.className='reply-btn'; replyBtn.textContent='Reply';  
    replyBtn.onclick = () => {  
      const replyText = prompt("Enter your reply to " + msg.sender + ":");  
      if(replyText) { msg.replies.push({sender:currentUser, text:replyText, timestamp:Date.now()}); renderMessages(); }  
    };  
  
    msgDiv.appendChild(sender); msgDiv.appendChild(msgText); msgDiv.appendChild(time); msgDiv.appendChild(replyBtn); msgDiv.appendChild(repliesContainer);  
    messagesContainer.appendChild(msgDiv);  
  });  
  
  if(isAtBottom) messagesContainer.scrollTop = messagesContainer.scrollHeight;  
}  
  
function sendMessage() {  
  const text = input.value.trim();  
  if(!text) return;  
  messages.push({id:Date.now(), sender:currentUser, text:text, replies:[], timestamp: Date.now()});  
  input.value = '';  
  renderMessages();  
}  
  
setInterval(() => { if(currentUser) renderMessages(); }, 1000);  
</script>  </body>  
</html>